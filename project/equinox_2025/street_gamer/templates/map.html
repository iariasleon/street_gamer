<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        .container {
            display: flex;
            gap: 20px;
        }

        #map-container {
            flex: 1;
            height: 100%;
            max-width: 100%;
            position: relative;
            box-sizing: border-box;
            display: flex; /* Habilita flexbox */
            flex-direction: column; /* Coloca el botón debajo del mapa */
            align-items: center; /* Centra el contenido horizontalmente */
        }

        #map {
            height: 100%;
            width: 100%; /* Ajusta el ancho al contenedor */
            border: 5px solid #000; /* Borde negro visible */
            border-radius: 10px; /* Mantén las esquinas redondeadas */
            box-sizing: border-box; /* Incluye el borde dentro del tamaño total */
            margin: 0; /* Elimina márgenes externos */
            padding: 0; /* Elimina relleno interno */
            display: block; /* Asegura que el mapa sea un bloque completo */
        }

        #preguntas-container {
            flex: 1;
        }

        #preguntas {
            display: none;
            margin-top: 20px;
        }

        button {
            margin-top: 40px; /* Aumenta el margen superior para mover el botón más abajo */
            padding: 10px 20px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h1>STREET GAMER</h1>
    <div class="container">
        <div id="map-container">
            <div id="map">{{ map|safe }}</div>
            <button id="jugar-btn">JUGAR</button>
        </div>
        <div id="preguntas-container">
            <div id="preguntas">
                <h2>Preguntas:</h2>
                <ul id="lista-preguntas"></ul>
            </div>
        </div>
    </div>

    <script>
        const boton = document.getElementById('jugar-btn');
        const preguntasDiv = document.getElementById('preguntas');
        const listaPreguntas = document.getElementById('lista-preguntas');
        const preguntas = [
            "¿Cuál es el nombre del estadio principal de fútbol en Madrid?",
            "¿Qué famoso museo se encuentra en Madrid y forma parte del Triángulo del Arte?",
            "¿Cómo se llama la plaza central más conocida de Madrid?",
            "¿Qué río atraviesa la ciudad de Madrid?",
            "¿Cuál es el nombre del parque más grande de Madrid?"
        ];

        const opciones = [
            ["Santiago Bernabéu", "Wanda Metropolitano", "Vicente Calderón"],
            ["Museo del Prado", "Museo Reina Sofía", "Museo Thyssen-Bornemisza"],
            ["Puerta del Sol", "Plaza Mayor", "Plaza de España"],
            ["Río Manzanares", "Río Tajo", "Río Jarama"],
            ["Parque del Retiro", "Casa de Campo", "Parque Juan Carlos I"]
        ];

        const respuestasCorrectas = [
            "Santiago Bernabéu",
            "Museo del Prado",
            "Plaza Mayor",
            "Río Manzanares",
            "Parque del Retiro"
        ];

        boton.addEventListener('click', () => {
            preguntasDiv.style.display = 'block';
            listaPreguntas.innerHTML = ""; // Limpiar preguntas previas
            preguntas.forEach((pregunta, index) => {
                const li = document.createElement('li');
                const img = document.createElement('img');
                img.src = "/static/images/interrogacion.jpg";
                img.alt = "?";
                img.style.width = "16px";
                img.style.height = "16px";
                img.style.verticalAlign = "middle";

                li.innerHTML = `${pregunta} `;
                li.appendChild(img);

                const opcionesDiv = document.createElement('div');
                opciones[index].forEach((opcion) => {
                    const label = document.createElement('label');
                    label.style.display = 'block';
                    const checkbox = document.createElement('input');
                    checkbox.type = 'radio';
                    checkbox.name = `pregunta-${index}`; // Asegura que solo se pueda marcar una opción por pregunta
                    checkbox.value = opcion;
                    label.appendChild(checkbox);
                    label.appendChild(document.createTextNode(opcion));
                    opcionesDiv.appendChild(label);
                });

                const comprobarBtn = document.createElement('button');
                comprobarBtn.textContent = "Comprobar";
                comprobarBtn.style.marginTop = "10px";
                comprobarBtn.addEventListener('click', () => {
                    const seleccionada = document.querySelector(`input[name="pregunta-${index}"]:checked`);
                    if (seleccionada) {
                        if (seleccionada.value === respuestasCorrectas[index]) {
                            img.src = "/static/images/ok.png"; // Cambia el logo a ok.png
                        } else {
                            img.src = "/static/images/ko.png"; // Cambia el logo a ko.png
                        }
                    } else {
                        alert("Por favor, selecciona una opción antes de comprobar.");
                    }
                });

                li.appendChild(opcionesDiv);
                li.appendChild(comprobarBtn);
                listaPreguntas.appendChild(li);
            });
        });
    </script>
</body>
</html>
